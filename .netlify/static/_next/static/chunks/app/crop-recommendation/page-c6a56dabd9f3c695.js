(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{12577:(e,a,l)=>{Promise.resolve().then(l.bind(l,58260))},17313:(e,a,l)=>{"use strict";l.d(a,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>i});var t=l(95155),s=l(12115),r=l(60704),n=l(59434);let i=r.bL,o=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(r.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",l),...s})});o.displayName=r.B8.displayName;let d=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(r.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",l),...s})});d.displayName=r.l9.displayName;let c=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(r.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",l),...s})});c.displayName=r.UC.displayName},17759:(e,a,l)=>{"use strict";l.d(a,{C5:()=>g,MJ:()=>j,Rr:()=>f,eI:()=>h,lR:()=>p,lV:()=>d,zB:()=>m});var t=l(95155),s=l(12115),r=l(66634),n=l(62177),i=l(59434),o=l(85057);let d=n.Op,c=s.createContext({}),m=e=>{let{...a}=e;return(0,t.jsx)(c.Provider,{value:{name:a.name},children:(0,t.jsx)(n.xI,{...a})})},u=()=>{let e=s.useContext(c),a=s.useContext(x),{getFieldState:l,formState:t}=(0,n.xW)(),r=l(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=a;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...r}},x=s.createContext({}),h=s.forwardRef((e,a)=>{let{className:l,...r}=e,n=s.useId();return(0,t.jsx)(x.Provider,{value:{id:n},children:(0,t.jsx)("div",{ref:a,className:(0,i.cn)("space-y-2",l),...r})})});h.displayName="FormItem";let p=s.forwardRef((e,a)=>{let{className:l,...s}=e,{error:r,formItemId:n}=u();return(0,t.jsx)(o.J,{ref:a,className:(0,i.cn)(r&&"text-destructive",l),htmlFor:n,...s})});p.displayName="FormLabel";let j=s.forwardRef((e,a)=>{let{...l}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:o}=u();return(0,t.jsx)(r.DX,{ref:a,id:n,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...l})});j.displayName="FormControl";let f=s.forwardRef((e,a)=>{let{className:l,...s}=e,{formDescriptionId:r}=u();return(0,t.jsx)("p",{ref:a,id:r,className:(0,i.cn)("text-sm text-muted-foreground",l),...s})});f.displayName="FormDescription";let g=s.forwardRef((e,a)=>{var l;let{className:s,children:r,...n}=e,{error:o,formMessageId:d}=u(),c=o?String(null!=(l=null==o?void 0:o.message)?l:""):r;return c?(0,t.jsx)("p",{ref:a,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});g.displayName="FormMessage"},58260:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>ee});var t=l(95155),s=l(12115),r=l(62177),n=l(90221),i=l(55594),o=l(34477);let d=(0,o.createServerReference)("40a7adf25781fd6c163d521ea784b9ad3b999c4b4b",o.callServer,void 0,o.findSourceMapURL,"aiCropRecommendationFromPrompt");var c=l(27696),m=l(55028),u=l(30285),x=l(17759),h=l(59409),p=l(66695),j=l(45821),f=l(25318),g=l(59434);let b=j.bL;j.l9;let y=j.ZL,v=j.bm,N=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(j.hJ,{ref:a,className:(0,g.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...s})});N.displayName=j.hJ.displayName;let C=s.forwardRef((e,a)=>{let{className:l,children:s,...r}=e;return(0,t.jsxs)(y,{children:[(0,t.jsx)(N,{}),(0,t.jsxs)(j.UC,{ref:a,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),...r,children:[s,(0,t.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=j.UC.displayName;let w=e=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...l})};w.displayName="DialogHeader";let S=e=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...l})};S.displayName="DialogFooter";let R=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(j.hE,{ref:a,className:(0,g.cn)("text-lg font-semibold leading-none tracking-tight",l),...s})});R.displayName=j.hE.displayName;let T=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(j.VY,{ref:a,className:(0,g.cn)("text-sm text-muted-foreground",l),...s})});T.displayName=j.VY.displayName;var z=l(50172),L=l(17832),B=l(64442),D=l(83662),M=l(81697),k=l(11471),P=l(1100),F=l(99329),V=l(87824),K=l(87481),A=l(66424),I=l(6874),J=l.n(I),H=l(62523),G=l(17313),U=l(85127);let Y={bdod:"Bulk Density",cec:"Cation Exchange Capacity",clay:"Clay Content",nitrogen:"Nitrogen",phh2o:"pH (Water)",sand:"Sand Content",silt:"Silt Content",soc:"Soil Organic Carbon"},E=e=>{switch(e){case"phh2o":return"pH";case"bdod":return"g/cm\xb3";case"cec":return"cmol/kg";case"soc":case"nitrogen":case"clay":case"sand":case"silt":return"g/kg";default:return""}};function O(e){let{soilData:a}=e;if(!a)return(0,t.jsx)("p",{className:"p-4 text-center",children:"No soil data available."});let l=(e,a)=>{let l;if(null==a)return"N/A";switch(e){case"phh2o":case"cec":case"soc":case"clay":case"sand":case"silt":l=a/10;break;case"bdod":case"nitrogen":l=a/100;break;default:l=a}return l.toFixed(2)};return(0,t.jsxs)(U.XI,{children:[(0,t.jsx)(U.A0,{children:(0,t.jsxs)(U.Hj,{children:[(0,t.jsx)(U.nd,{className:"font-bold",children:"Soil Property"}),(0,t.jsx)(U.nd,{className:"font-bold text-right",children:"Value (0-5cm)"}),(0,t.jsx)(U.nd,{className:"font-bold text-right",children:"Value (5-15cm)"}),(0,t.jsx)(U.nd,{className:"font-bold text-right",children:"Unit"})]})}),(0,t.jsx)(U.BF,{children:a.map(e=>{var a,s,r,n;return(0,t.jsxs)(U.Hj,{children:[(0,t.jsx)(U.nA,{className:"font-medium",children:Y[e.name]||e.name}),(0,t.jsx)(U.nA,{className:"text-right",children:l(e.name,null==(s=e.depths[0])||null==(a=s.values)?void 0:a.mean)}),(0,t.jsx)(U.nA,{className:"text-right",children:l(e.name,null==(n=e.depths[1])||null==(r=n.values)?void 0:r.mean)}),(0,t.jsx)(U.nA,{className:"text-right text-muted-foreground",children:E(e.name)})]},e.name)})})]})}let q=(0,m.default)(()=>Promise.all([l.e(484),l.e(761),l.e(717)]).then(l.bind(l,88717)).then(e=>e.InteractiveMap),{loadableGenerated:{webpack:()=>[88717]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-muted",children:(0,t.jsx)(z.A,{className:"animate-spin"})})}),W=i.z.object({latitude:i.z.coerce.number().min(-90).max(90).optional(),longitude:i.z.coerce.number().min(-180).max(180).optional(),rainfall:i.z.string().min(1,"Please select the annual rainfall."),soilType:i.z.string().min(1,"Please select the primary soil type."),primaryGoal:i.z.string().min(1,"Please select your primary farming goal."),riskTolerance:i.z.string().min(1,"Please select your risk tolerance."),fieldSize:i.z.coerce.number().min(0,"Field size must be a positive number."),totalBudget:i.z.coerce.number().min(0,"Budget must be non-negative").optional(),recentCrop:i.z.string().min(1,"Please select the most recent crop."),recentCropYear:i.z.string().min(1,"Please select the year."),fertilizer:i.z.string().min(1,"Please select your fertilizer preference."),irrigation:i.z.string().min(1,"Please select your irrigation method.")}),_=["Wheat","Paddy","Maize","Mustard","Arhar (Tur)","Bajra","Barley","Black Pepper","Cardamom","Cashew Nuts","Castor Seed","Coconut","Coffee","Coriander","Cotton","Finger Millet (Ragi)","Gram (Chana)","Groundnut","Guar Seed","Horse-gram","Jowar (Sorghum)","Jute","Korra","Lentil (Masur)","Linseed","Mahua","Masur","Moong (Green Gram)","Niger Seed","Onion","Other Pulses","Potato","Ragi","Rapeseed & Mustard","Rice","Rubber","Safflower","Sannhamp","Sesamum","Soyabean","Sugarcane","Sunflower","Tamarind","Tea","Tobacco","Turmeric","Urad","Varagu"],X={title:"AI Crop Recommendation",description:"Enter coordinates manually or use your GPS to fetch soil data. Then, describe your farm, and our AI will suggest the best crops for you.",locationLabel:"1. Location for Soil Analysis",latitudePlaceholder:"Latitude (e.g., 23.610)",longitudePlaceholder:"Longitude (e.g., 85.279)",fetchCoordsButton:"Fetch Data for Coordinates",detectLocationButton:"Detect My Location & Fetch Data",locationDescription:"The AI will use fetched soil and weather data for recommendations.",farmDetailsLabel:"2. Farm & Climate Details",annualRainfallLabel:"Annual Rainfall",soilTypeLabel:"Primary Soil Type",primaryGoalLabel:"Primary Goal",riskToleranceLabel:"Risk Tolerance",fieldSizeLabel:"Field Size (acres)",fieldSizePlaceholder:"e.g., 5",totalBudgetLabel:"Total Budget (₹)",totalBudgetPlaceholder:"e.g., 50000",fertilizerPrefLabel:"Fertilizer Preference",irrigationMethodLabel:"Irrigation Method",cropHistoryLabel:"Crop History",recentCropLabel:"Most Recent Crop",harvestYearLabel:"Harvest Year",cropHistoryDescription:"What was the most recent crop grown on this field?",recommendButton:"Recommend Crops",resultTitle:"AI-Powered Recommendations",resultDescription:"Based on your input, here are our top suggestions.",soilDialogTitle:"SoilGrids Data Preview",soilDialogDescription:"This is the scientific soil data fetched from SoilGrids.org for your location. Review the data and visual maps. Click 'Use This Data' when done.",tableTab:"Table Data",mapsTab:"Interactive Map",rawTab:"Raw Data",googleMapsButton:"View on Google Maps",useDataButton:"Use This Data",cancelButton:"Cancel",placeholderDescription:"Our AI is analyzing your farm data...",recommendedCropsLabel:"Recommended Crops",reasoningLabel:"Reasoning",placeholderTitle:"Your Recommendations Await",dataSummaryTitle:"Soil & Weather Summary"},Z=[{name:"bdod",depths:[{label:"0-5cm",values:{mean:136}},{label:"5-15cm",values:{mean:142}}]},{name:"cec",depths:[{label:"0-5cm",values:{mean:182}},{label:"5-15cm",values:{mean:195}}]},{name:"clay",depths:[{label:"0-5cm",values:{mean:225}},{label:"5-15cm",values:{mean:240}}]},{name:"nitrogen",depths:[{label:"0-5cm",values:{mean:115}},{label:"5-15cm",values:{mean:105}}]},{name:"phh2o",depths:[{label:"0-5cm",values:{mean:68}},{label:"5-15cm",values:{mean:69}}]},{name:"sand",depths:[{label:"0-5cm",values:{mean:450}},{label:"5-15cm",values:{mean:430}}]},{name:"silt",depths:[{label:"0-5cm",values:{mean:325}},{label:"5-15cm",values:{mean:330}}]},{name:"soc",depths:[{label:"0-5cm",values:{mean:125}},{label:"5-15cm",values:{mean:110}}]}],$=new Date().getFullYear(),Q=Array.from({length:5},(e,a)=>($-a).toString());function ee(){let[e,a]=(0,s.useState)(null),[l,i]=(0,s.useState)(!1),[o,m]=(0,s.useState)(!1),[j,f]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),{toast:N}=(0,K.dj)(),{translatedText:I,T:U,isTranslating:Y}=(0,c.Bd)(X),[E,$]=(0,s.useState)([{lat:23.35,lng:85.32,name:"Sample Farm A"},{lat:23.33,lng:85.3,name:"Sample Farm B"},{lat:23.34,lng:85.29,name:"Local Market"}]),[ee,ea]=(0,s.useState)(!1),el=(0,r.mN)({resolver:(0,n.u)(W)});(0,s.useEffect)(()=>{ea(!0),el.reset({latitude:23.3441,longitude:85.3096,rainfall:"500-1000mm",soilType:"loam",primaryGoal:"mixed",riskTolerance:"medium",fieldSize:5,totalBudget:5e4,recentCrop:"Rice",fertilizer:"mixed",irrigation:"flood",recentCropYear:new Date().getFullYear().toString()})},[el]);let et=el.watch("latitude"),es=el.watch("longitude");async function er(e){i(!0),a(null);try{let l="My farm's annual rainfall is ".concat(e.rainfall,". The soil type is primarily ").concat(e.soilType,". My primary goal for farming is ").concat(e.primaryGoal,". I have a ").concat(e.riskTolerance," tolerance for risk. My field size is ").concat(e.fieldSize," acres. I prefer to use ").concat(e.fertilizer," fertilizer. My irrigation method is ").concat(e.irrigation,". The most recent crop I harvested was ").concat(e.recentCrop," in the year ").concat(e.recentCropYear,".");e.latitude&&e.longitude&&(l+=" My farm is located at latitude ".concat(e.latitude," and longitude ").concat(e.longitude,".")),e.totalBudget&&(l+=" My total budget is ₹".concat(e.totalBudget,"."));let t=await d({prompt:l});a(t)}catch(e){console.error("Error getting crop recommendation:",e),N({title:"Error",description:"Failed to get crop recommendation. Please try again.",variant:"destructive"})}finally{i(!1)}}let en=(0,s.useCallback)(async(e,a)=>{m(!0),y(Z),f(!0),el.setValue("latitude",e,{shouldValidate:!0}),el.setValue("longitude",a,{shouldValidate:!0}),N({title:"Using Sample Soil Data",description:'Review the sample soil data and click "Use This Data" to continue.'}),m(!1)},[el,N]),ei=(0,s.useCallback)(()=>{let e=el.getValues("latitude"),a=el.getValues("longitude");void 0!==e&&void 0!==a?en(e,a):N({title:"Missing Coordinates",description:"Please enter both latitude and longitude.",variant:"destructive"})},[el,N,en]),eo=(0,s.useCallback)(()=>{if(m(!0),!navigator.geolocation){N({title:"Geolocation not supported",description:"Your browser does not support geolocation.",variant:"destructive"}),m(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{latitude:a,longitude:l}=e.coords;en(a,l)},e=>{console.error("Error fetching location:",e),N({title:"Location Error",description:"Could not fetch your location. Please ensure you have granted permission.",variant:"destructive"}),m(!1)})},[N,en]);return ee?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{children:[(0,t.jsxs)(p.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"text-primary"}),(0,t.jsx)(U,{textKey:"title"})]}),(0,t.jsx)(p.BT,{children:(0,t.jsx)(U,{textKey:"description"})})]}),(0,t.jsx)(p.Wu,{children:(0,t.jsx)(x.lV,{...el,children:(0,t.jsxs)("form",{onSubmit:el.handleSubmit(er),className:"space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(x.lR,{className:"font-headline text-lg",children:(0,t.jsx)(U,{textKey:"locationLabel"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsx)(x.zB,{control:el.control,name:"latitude",render:e=>{var a;let{field:l}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(H.p,{type:"number",step:"any",placeholder:I.latitudePlaceholder,...l,value:null!=(a=l.value)?a:""})}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"longitude",render:e=>{var a;let{field:l}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(H.p,{type:"number",step:"any",placeholder:I.longitudePlaceholder,...l,value:null!=(a=l.value)?a:""})}),(0,t.jsx)(x.C5,{})]})}})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(u.$,{type:"button",variant:"outline",size:"sm",onClick:ei,disabled:o||Y,children:[o&&void 0!==et?(0,t.jsx)(z.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(B.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(U,{textKey:"fetchCoordsButton"})]}),(0,t.jsxs)(u.$,{type:"button",variant:"outline",size:"sm",onClick:eo,disabled:o||Y,children:[o&&void 0===et?(0,t.jsx)(z.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(U,{textKey:"detectLocationButton"})]})]}),(0,t.jsx)(x.Rr,{children:(0,t.jsx)(U,{textKey:"locationDescription"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-headline text-lg flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"text-primary/80"}),(0,t.jsx)(U,{textKey:"farmDetailsLabel"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(x.zB,{control:el.control,name:"rainfall",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"annualRainfallLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"<500mm",children:"Low (<500mm)"}),(0,t.jsx)(h.eb,{value:"500-1000mm",children:"Medium (500-1000mm)"}),(0,t.jsx)(h.eb,{value:">1000mm",children:"High (>1000mm)"})]})]}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"soilType",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"soilTypeLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"sandy",children:"Sandy"}),(0,t.jsx)(h.eb,{value:"clay",children:"Clay"}),(0,t.jsx)(h.eb,{value:"loam",children:"Loam"}),(0,t.jsx)(h.eb,{value:"silty",children:"Silty"}),(0,t.jsx)(h.eb,{value:"peaty",children:"Peaty"})]})]}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"primaryGoal",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"primaryGoalLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"cash-crop",children:"Cash Crop / Profit"}),(0,t.jsx)(h.eb,{value:"personal-consumption",children:"Personal Consumption"}),(0,t.jsx)(h.eb,{value:"mixed",children:"Mixed Use"}),(0,t.jsx)(h.eb,{value:"soil-improvement",children:"Soil Improvement"})]})]}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"riskTolerance",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"riskToleranceLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"low",children:"Low Risk"}),(0,t.jsx)(h.eb,{value:"medium",children:"Medium Risk"}),(0,t.jsx)(h.eb,{value:"high",children:"High Risk"})]})]}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"fieldSize",render:e=>{var a;let{field:l}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"fieldSizeLabel"})}),(0,t.jsx)(x.MJ,{children:(0,t.jsx)(H.p,{type:"number",placeholder:I.fieldSizePlaceholder,...l,value:null!=(a=l.value)?a:""})}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"totalBudget",render:e=>{var a;let{field:l}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"totalBudgetLabel"})}),(0,t.jsx)(x.MJ,{children:(0,t.jsx)(H.p,{type:"number",placeholder:I.totalBudgetPlaceholder,...l,value:null!=(a=l.value)?a:""})}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"fertilizer",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"fertilizerPrefLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"organic",children:"Organic"}),(0,t.jsx)(h.eb,{value:"synthetic",children:"Synthetic"}),(0,t.jsx)(h.eb,{value:"mixed",children:"Mixed"})]})]}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"irrigation",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"irrigationMethodLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"drip",children:"Drip"}),(0,t.jsx)(h.eb,{value:"sprinkler",children:"Sprinkler"}),(0,t.jsx)(h.eb,{value:"flood",children:"Flood"}),(0,t.jsx)(h.eb,{value:"rainfed",children:"Rain-fed"})]})]}),(0,t.jsx)(x.C5,{})]})}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.lR,{children:(0,t.jsx)(U,{textKey:"cropHistoryLabel"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[(0,t.jsx)(x.zB,{control:el.control,name:"recentCrop",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{className:"text-xs text-muted-foreground",children:(0,t.jsx)(U,{textKey:"recentCropLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsx)(h.gC,{children:_.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))})]}),(0,t.jsx)(x.C5,{})]})}}),(0,t.jsx)(x.zB,{control:el.control,name:"recentCropYear",render:e=>{let{field:a}=e;return(0,t.jsxs)(x.eI,{children:[(0,t.jsx)(x.lR,{className:"text-xs text-muted-foreground",children:(0,t.jsx)(U,{textKey:"harvestYearLabel"})}),(0,t.jsxs)(h.l6,{onValueChange:a.onChange,value:a.value,disabled:Y,children:[(0,t.jsx)(x.MJ,{children:(0,t.jsx)(h.bq,{children:(0,t.jsx)(h.yv,{placeholder:"Select..."})})}),(0,t.jsx)(h.gC,{children:Q.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))})]}),(0,t.jsx)(x.C5,{})]})}})]}),(0,t.jsx)(x.Rr,{className:"mt-2",children:(0,t.jsx)(U,{textKey:"cropHistoryDescription"})})]})]}),(0,t.jsxs)(u.$,{type:"submit",disabled:l||Y,className:"w-full",children:[l?(0,t.jsx)(z.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(U,{textKey:"recommendButton"})]})]})})})]}),(0,t.jsxs)("div",{className:"lg:sticky top-6",children:[l&&(0,t.jsx)(p.Zp,{children:(0,t.jsxs)(p.Wu,{className:"p-6 flex flex-col items-center justify-center min-h-[300px]",children:[(0,t.jsx)(z.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:(0,t.jsx)(U,{textKey:"placeholderDescription"})})]})}),e&&(0,t.jsxs)(p.Zp,{className:"animate-in fade-in-50",children:[(0,t.jsxs)(p.aR,{children:[(0,t.jsx)(p.ZB,{className:"font-headline",children:(0,t.jsx)(U,{textKey:"resultTitle"})}),(0,t.jsx)(p.BT,{children:(0,t.jsx)(U,{textKey:"resultDescription"})})]}),(0,t.jsxs)(p.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg font-headline",children:(0,t.jsx)(U,{textKey:"recommendedCropsLabel"})}),(0,t.jsx)("p",{className:"text-muted-foreground",children:e.crops})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg font-headline",children:(0,t.jsx)(U,{textKey:"reasoningLabel"})}),(0,t.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:e.reasoning})]}),e.soilDataSummary&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg font-headline flex items-center gap-2",children:[(0,t.jsx)(P.A,{className:"text-primary"}),(0,t.jsx)(U,{textKey:"dataSummaryTitle"})]}),(0,t.jsxs)("ul",{className:"text-muted-foreground text-sm list-disc pl-5 mt-2 grid grid-cols-2 gap-x-4",children:[(0,t.jsxs)("li",{children:["pH: ",e.soilDataSummary.ph]}),(0,t.jsxs)("li",{children:["Nitrogen: ",e.soilDataSummary.n]}),(0,t.jsxs)("li",{children:["Phosphorus: ",e.soilDataSummary.p]}),(0,t.jsxs)("li",{children:["Potassium: ",e.soilDataSummary.k]}),(0,t.jsxs)("li",{children:["Organic Carbon: ",e.soilDataSummary.oc]}),e.soilDataSummary.currentTemp&&(0,t.jsxs)("li",{children:["Temp: ",e.soilDataSummary.currentTemp]}),e.soilDataSummary.humidity&&(0,t.jsxs)("li",{children:["Humidity: ",e.soilDataSummary.humidity]}),e.soilDataSummary.forecast&&(0,t.jsxs)("li",{className:"col-span-2",children:["Forecast: ",e.soilDataSummary.forecast]})]})]})]})]}),!l&&!e&&(0,t.jsx)(p.Zp,{className:"border-dashed",children:(0,t.jsxs)(p.Wu,{className:"p-6 flex flex-col items-center justify-center min-h-[300px] text-center",children:[(0,t.jsx)(k.A,{className:"h-12 w-12 text-muted-foreground/50"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:(0,t.jsx)(U,{textKey:"placeholderTitle"})})]})})]})]}),(0,t.jsx)(b,{open:j,onOpenChange:f,children:(0,t.jsxs)(C,{className:"max-w-4xl h-[90vh] flex flex-col p-0",children:[(0,t.jsxs)(w,{className:"p-6 pb-4 border-b",children:[(0,t.jsxs)(R,{className:"flex items-center gap-2 font-headline",children:[(0,t.jsx)(F.A,{className:"text-primary"}),(0,t.jsx)(U,{textKey:"soilDialogTitle"})]}),(0,t.jsx)(T,{children:(0,t.jsx)(U,{textKey:"soilDialogDescription"})})]}),(0,t.jsx)("div",{className:"flex-grow p-6 overflow-auto",children:(0,t.jsxs)(G.tU,{defaultValue:"table",className:"w-full h-full flex flex-col",children:[(0,t.jsxs)(G.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(G.Xi,{value:"table",children:(0,t.jsx)(U,{textKey:"tableTab"})}),(0,t.jsx)(G.Xi,{value:"maps",children:(0,t.jsx)(U,{textKey:"mapsTab"})}),(0,t.jsx)(G.Xi,{value:"raw",children:(0,t.jsx)(U,{textKey:"rawTab"})})]}),(0,t.jsx)(G.av,{value:"table",className:"mt-4 rounded-md border flex-grow overflow-y-auto",children:(0,t.jsx)(O,{soilData:g})}),(0,t.jsx)(G.av,{value:"raw",className:"mt-4 flex-grow",children:(0,t.jsx)(A.F,{className:"h-full rounded-md border p-4 bg-muted",children:(0,t.jsx)("pre",{className:"text-sm",children:JSON.stringify(g,null,2)})})}),(0,t.jsx)(G.av,{value:"maps",className:"mt-4 flex-grow",children:(0,t.jsx)("div",{className:"h-full rounded-md overflow-hidden border",children:j&&(0,t.jsx)(q,{latitude:null!=et?et:23.61,longitude:null!=es?es:85.27,onMapClick:(e,a)=>{el.setValue("latitude",parseFloat(e.toFixed(5)),{shouldValidate:!0}),el.setValue("longitude",parseFloat(a.toFixed(5)),{shouldValidate:!0}),N({title:"Location Updated",description:"Coordinates updated from map. You can now fetch the new soil data."})},dummyLocations:E})})})]})}),(0,t.jsxs)(S,{className:"sm:justify-between gap-2 p-6 pt-4 border-t",children:[(0,t.jsx)(u.$,{variant:"secondary",asChild:!0,children:(0,t.jsxs)(J(),{href:"https://www.google.com/maps?q=".concat(el.getValues("latitude"),",").concat(el.getValues("longitude")),target:"_blank",children:[(0,t.jsx)(V.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(U,{textKey:"googleMapsButton"})]})}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(v,{asChild:!0,children:(0,t.jsx)(u.$,{variant:"outline",children:(0,t.jsx)(U,{textKey:"cancelButton"})})}),(0,t.jsx)(u.$,{onClick:()=>f(!1),disabled:Y,children:(0,t.jsx)(U,{textKey:"useDataButton"})})]})]})]})})]}):(0,t.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,t.jsx)(z.A,{className:"h-12 w-12 animate-spin text-primary"})})}},66424:(e,a,l)=>{"use strict";l.d(a,{F:()=>i});var t=l(95155),s=l(12115),r=l(89051),n=l(59434);let i=s.forwardRef((e,a)=>{let{className:l,children:s,viewportRef:i,...d}=e;return(0,t.jsxs)(r.bL,{ref:a,className:(0,n.cn)("relative overflow-hidden",l),...d,children:[(0,t.jsx)(r.LM,{ref:i,className:"h-full w-full rounded-[inherit]",children:s}),(0,t.jsx)(o,{}),(0,t.jsx)(r.OK,{})]})});i.displayName=r.bL.displayName;let o=s.forwardRef((e,a)=>{let{className:l,orientation:s="vertical",...i}=e;return(0,t.jsx)(r.VM,{ref:a,orientation:s,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",l),...i,children:(0,t.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=r.VM.displayName},85057:(e,a,l)=>{"use strict";l.d(a,{J:()=>d});var t=l(95155),s=l(12115),r=l(40968),n=l(74466),i=l(59434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(r.b,{ref:a,className:(0,i.cn)(o(),l),...s})});d.displayName=r.b.displayName},85127:(e,a,l)=>{"use strict";l.d(a,{A0:()=>i,BF:()=>o,Hj:()=>d,XI:()=>n,nA:()=>m,nd:()=>c});var t=l(95155),s=l(12115),r=l(59434);let n=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",l),...s})})});n.displayName="Table";let i=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",l),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",l),...s})});o.displayName="TableBody",s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",l),...s})}).displayName="TableFooter";let d=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",l),...s})});d.displayName="TableRow";let c=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",l),...s})});c.displayName="TableHead";let m=s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",l),...s})});m.displayName="TableCell",s.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",l),...s})}).displayName="TableCaption"}},e=>{var a=a=>e(e.s=a);e.O(0,[66,838,310,521,861,987,542,660,441,684,358],()=>a(12577)),_N_E=e.O()}]);